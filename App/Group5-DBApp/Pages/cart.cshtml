@page
@model CartModel
@{
    ViewData["Title"] = "Cart";
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Online Shopping Application</title>
    <link rel="stylesheet" href="styles.css">
    <script>
        function placeOrder(orderNo) {
            // Update status to "Order Received"
            var statusElement = document.getElementById("status_" + orderNo);
            statusElement.innerText = "Order Received";

            // Timestamp ship date and delivery date to now
            var now = new Date();
            var shipDateElement = document.getElementById("ship_date_" + orderNo);
            shipDateElement.innerText = now.toLocaleString();

            var deliveryDateElement = document.getElementById("delivery_date_" + orderNo);
            deliveryDateElement.innerText = now.toLocaleString();

            // Display order placed message
            alert("Order No: " + orderNo + " has been placed.");
        }
    </script>
</head>
<body>
    <header>
        <h1>Welcome to Our Online Store</h1>
    </header>

    <main>
        <br>
        <section class="orders" id="orders">
            <h2>Current Cart/Orders</h2>
            <br>
            <br>
            @foreach (var orders in Model.Orders)
            {
                <div class="orders-list">
                    <h3>Order No: @orders.order_id</h3>
                    <p>Product: @orders.prod_id</p>
                    <p>Quantity: @orders.quantity</p>
                    <p>Status: <span id="status_@orders.order_id">@orders.status</span></p>
                    <p>Delivery Type: @orders.delivery_type</p>
                    <p>Delivery Price: @orders.delivery_price</p>
                    <p>Ship Date: <span id="ship_date_@orders.order_id">@orders.ship_date</span></p>
                    <p>Delivery Date: <span id="delivery_date_@orders.order_id">@orders.delivery_date</span></p>
                </div>
                <button onclick="placeOrder('@orders.order_id')">Place Order</button>
                <br>
                <br>
            }
        </section>
    </main>
</body>
</html>
